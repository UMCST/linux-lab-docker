version: "2.1"
services:
  web0:
    build: ./c2-docker
    tty: true
    restart: always
    entrypoint: /bin/bash
  web:
    build: ./lab-docker
    restart: always
    cap_add:
      - SYS_ADMIN # for SystemD
      - NET_ADMIN # for iptables
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:ro #needed for systemD. readonly
    networks:
      - bridge_net
    tmpfs:
      - /run
      - /run/lock
  file:
    build: ./file-server
    ports:
      - "80:80"
    volumes:
      - ./file-server/files/:/usr/share/nginx/html
networks:
  bridge_net:
